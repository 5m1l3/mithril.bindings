<html>
<head>
	<title></title>
	<script src="../mithril.js/mithril.js"></script>
	<script src="mithril.bindings.js"></script>
</head>
<body>
<h1>Bi-directional bound value</h1>
<div id="content"></div>

<button type="button" id="setValueButton">Set name</button>

<script>
//  Bi-directional data binding using custom bindings
var app = {
	model: function(name) {
		this.name = m.p(name);
		this.hide = m.p();
	},
	controller: function() {
		window.model = this.user = new app.model("John Doe");
	},
	view: function(data) {
		var u = data.user;
		return [
			m("h1", { text: u.name }),
			m("button", { type: "button", toggle: u.hide }, "Toggle hide"),
			m("div", { hide: u.hide }, [
				m("input", { name: "name", value: u.name }),
				m("div", "Model name value: " + u.name())
			])
		];
	}
};

//initialize
m.module(document.getElementById('content'), app);
</script>

<script>
//	Demonstrate external access to the model
document.getElementById('setValueButton').onclick = function(){
	model.name("John Smith");
};
</script>

</body>
</html>